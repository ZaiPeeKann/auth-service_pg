# puregrade_go

Данный проект является сервером для агрегатора отзывов (как metacritic или IGN, например). Проект призван продемонстрировать мои знания и навыки в веб-разработке. Сервер может обрабатывать http и grpc* запросы и написан в соответствии с принципами чистой архитектуры. 

Стек: PostgreSQL + sqlx, Docker, Gin, gRPC, jwt, testify (for tests). 

## Как запустить

> Важно! Убедитесь что у вас установлен компилятор Go v17.0+ (Для второго способа) и Docker.

Вариантов запуска существует два. Первый:
1. Клонируем этот репозиторий: `git clone https://github.com/ZaiPeeKann/puregrade_go`
2. Переходим в папку с проектом
3. Настройте переменные окружения, в этом варианте используем `db.host: "host.docker.internal"` а остальное оставляем по дефолту (Лучше ничего не придумывать)
4. запускаем `docker-compose up`
> В чем проблема? Не будет работать gRPC сервер. По тому что по дефолту 1 контейнер = 1 процесс, но это фиксится 2мя контейнерами или использованием определенной утилиты (Так сказать, ждите патч, господа). Тут в игру вступает альтернативный вариант.

Вариант 2:
1. Клонируем этот репозиторий: `git clone https://github.com/ZaiPeeKann/puregrade_go`
2. Переходим в папку с проектом
3. Настройте переменные окружения, в этом варианте используем `db.host: "0.0.0.0"` а остальное оставляем по дефолту
4. Тут либо запускаем `docker-compose up` а затем оффаем контейнер с сервисом и запускаем свой локально как то так: `go run ./cmd/main.go`. Либо же запускаем `docker-compose up`, предварительно выпилив из файла `docker-compose.yml` все упоминания о сервере.
> Это позволяет пощупать весь функционал, но запускается дольше (Опять же ждем патч)

## Использование

При дефотных настройках порт http сервера - 8000, а grpc - 9000. Можно протестировать, отправляя запросы, например, через Postman

За более детальной документацией обращаться сюда: https://www.notion.so/puregrade/Puregrade-docs-aa1883df47f348cfa98e2f334a2f858f?pvs=4
> В последствии она будет обновляться также, как и этот проект

## Проблемы

Тут я попытался собрать наиболее вероятные проблемы с запуском и использованием проекта.
1. Одной из вероятных ошибок запуска является ошибка, при которых один из портов, которые хочет слушать проект, уже занят. В этом случае посмотрите какие процессы используют порты, например так: `netstat -ao`, а затем завершите процесс.
2. Возможно, вы могли попутать переменную `db.host в configs/example/config.yml`. Чтобы убедиться, что вы не налажали в этом вопросе, внимательно посмотрите раздел **Как запустить**
3. Если вы заметили какую либо еще ошибку, создайте issue или напишите мне в лс в тг: https://t.me/tiltedEnmu

*grpc** - *Реализована только регистрация и авторизация, просто чтобы показать, что я умею.*